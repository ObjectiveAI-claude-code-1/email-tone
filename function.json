{
  "type": "scalar.function",
  "description": "Email Tone Scorer. Evaluates how appropriate an email's tone is for a given context.",
  "changelog": null,
  "input_schema": {
    "type": "object",
    "properties": {
      "email": {
        "type": "string",
        "description": "The email text to evaluate."
      },
      "context": {
        "type": "string",
        "description": "Free-form description of the situation/audience (e.g., 'asking my boss for time off', 'following up with a client after a demo')."
      }
    },
    "required": [
      "email",
      "context"
    ]
  },
  "input_maps": null,
  "tasks": [
    {
      "type": "vector.completion",
      "skip": null,
      "map": null,
      "messages": [
        {
          "role": "user",
          "content": {
            "$jmespath": "join('', ['Evaluate the tone of the following email given this context:\n\nContext: ', input.context, '\n\nEmail:\n\"\"\"', input.email, '\"\"\"\n\nHow appropriate is the tone for this context?'])"
          }
        }
      ],
      "tools": null,
      "responses": [
        "The tone is perfectly appropriate for this context",
        "The tone is mostly appropriate with minor issues",
        "The tone is somewhat inappropriate for this context",
        "The tone is highly inappropriate for this context"
      ]
    }
  ],
  "output": {
    "$jmespath": "add(add(tasks[0].scores[0], multiply(tasks[0].scores[1], `0.66`)), multiply(tasks[0].scores[2], `0.33`))"
  }
}